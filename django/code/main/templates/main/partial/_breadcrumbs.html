{% load compress %}
{% load bleach_tags %}
{% load spaceless_json %}

<nav class="global-breadcrumbs">
  <div class="container">
    <ol>
      <li>
        <a href="{% url 'main:index' %}" aria-label="TOP"><span class="underline">TOP</span></a>
      </li>
      {% if '/works/' in request.path %}{# workのとき #}
        <li>
          <span>WORKS</span>
        </li>
      {% elif '/news/' == request.path %}{# newsのとき #}
        <li>
          <span>NEWS</span>
        </li>
      {% elif '見つかりません' in title %}{# 404のとき #}
        <li>
          <span>{{ title }}</span>
        </li>
      {% else %}{# news_detailのとき #}
        <li>
          <a href="{% url 'main:news_list' %}" aria-label="NEWS"><span class="underline">NEWS</span></a>
        </li>
        <li>
          <span>{{ title }}</span>
        </li>
      {% endif %}
    </ol>
  </div>
  {% if not '見つかりません' in title %}
    <script type="application/ld+json">{% spaceless_json %}
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "TOP",
          "item": "https://{{ request.get_host }}/"
        },
        {% if '/works/' in request.path %}{# workのとき #}
        {
          "@type": "ListItem",
          "position": 2,
          "name": "WORKS",
          "item": "https://{{ request.get_host }}{% url 'main:work_redirect' %}"
        }
        {% elif '/news/' == request.path %}{# newsのとき #}
        {
          "@type": "ListItem",
          "position": 2,
          "name": "NEWS",
          "item": "https://{{ request.get_host }}{% url 'main:news_list' %}"
        }
        {% else %}
        {
          "@type": "ListItem",
          "position": 2,
          "name": "NEWS",
          "item": "https://{{ request.get_host }}{% url 'main:news_list' %}"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "{{ title|bleach|escapejs }}",
          "item": "https://{{ request.get_host }}{% url 'main:news_detail' news.pk %}"
        }
        {% endif %}
      ]
    }
    {% endspaceless_json %}</script>
  {% endif %}
</nav>